!function(t){var s={};function i(o){if(s[o])return s[o].exports;var e=s[o]={i:o,l:!1,exports:{}};return t[o].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=t,i.c=s,i.d=function(t,s,o){i.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:o})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(s,"a",s),s},i.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},i.p="",i(i.s=0)}([function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.ChoiTrie=function(){function t(){var t=this;t.CACHING_COUNTING=2,t.node=function(s,i){var o="",e="",n=[],h=[];return console.log(i),i&&(0==s.length?(o+=";",e+="1;"):(o+=s[0],e+=s.length+s),h.push(1),i.constructor===Array?n.push(i):(n.push([]),n[0].push(i)),console.log("_what = "+i),console.log("_what = "+JSON.stringify(i))),{C:o,H:e,O:[],I:n,CC:h,length:n.length,length_h:n.length,select:function(t){return this.C?-1*this.select_c(t):this.H?this.select_h(t):0},select_c:function(t){for(var s=0;s<this.C.length;s++)if(t[0]===this.C[s])return s;return-1},add_C:function(t){var s=this.select_c(t);return-1!=s?(this.cachingIt(s),s):(this.C+=t,this.CC.push(1),this.C.length-1)},add_H:function(t,s){var i=this.select_H(t);if(console.log("add_H : h_idx = "+i+" word = "+t+", what "+JSON.stringify(s)),-1==i){var o=t.length;this.H+=o+t,i=this.length_h,this.length_h++}this.I[i]||(this.I[i]=[]),console.log("add_H : h_idx = "+i+", this.H = "+JSON.stringify(this.H)+",  this.I = "+JSON.stringify(this.I)),this.I[i].push(s)},add_O:function(s,i){var o=this.select_c(s[0]);console.log("add_O : c_idx = "+o+", this.O = "+JSON.stringify(this.O)),this.O[o]||(this.O[o]={});var e=this.O[o],n=0,h=null;for(var l in e)for(var r=s.length>l.length?l.length:s.length,g=0;g<r&&(console.log("add_O : _word = "+s+" key = "+l),l[g]==s[g]);g++)(null==h||n<=g)&&(n=g,h=l);if(console.log("add_O : _word = "+s+", _what = "+JSON.stringify(i)+" maximum_idx = "+n+" maximum_key = "+h),h){if(h.length-1==n)return h;var c=h.substr(0,n+1),f=h.substr(n+1,h.length-n);return console.log("add_O : prefix = "+c+", postfix = "+f),e[h].length_h==e[h].length?(console.log("Wondering : "+JSON.stringify(e[h])),e[h].pushPostfixToH(f)):(console.log("Wondering : diff : "+JSON.stringify(e[h])),e[h].pushPostfix(f),e[h].moveAllH2O()),e[c]=e[h],delete e[h],console.log("add_O : co[prefix] = "+JSON.stringify(e[c])),c}return console.log("add_O : PUSHED what = "+i),e[s]=new t.node("",i),console.log("add_O : co[_word] = "+JSON.stringify(e[s])),!0},cachingIt:function(t){this.CC[t]++},moveH2O:function(s){for(var i=0,o=0,e=this.C[s],n=this.I[s],h=0,l=0;l<this.CC.length;l++)this.CC[l]>t.CACHING_COUNTING||(n=this.I[h++],h==s&&(e=this.C[l]));for(console.log("moveH2O : this = "+JSON.stringify(this)+" this.CC = "+JSON.stringify(this.CC)),console.log("moveH2O : _idx = "+s+", _char = "+e+", _what = "+JSON.stringify(n)+" this.H = "+this.H+", this.O = "+JSON.stringify(this.O));o<this.H.length;){var r=Number.parseInt(this.H[o]);if(this.H[o+1]==e){var g=this.pop_h(i);console.log("moveH2O : word = "+g+" in while"),this.I.splice(i,1),this.add_O(g,n);break}o+=r+1,console.log("moveH2O : h_index = "+o+", "+this.H.substr(0,o)+" in while"),i++}console.log("moveH2O : _idx = "+s+" this.H = "+this.H+", this.O = "+JSON.stringify(this.O)),this.CC[s]<=t.CACHING_COUNTING&&(this.CC[s]+=t.CACHING_COUNTING)},moveAllH2O:function(){for(console.log("moveAllH2O : this.H = "+JSON.stringify(this.H)),console.log("moveAllH2O : this.O = "+JSON.stringify(this.O)),console.log("moveAllH2O : this.I = "+JSON.stringify(this.I));0<this.H.length;)if(this.H[1]){var s=this.pop_h(0),i=this.I[0];this.I.splice(0,1),this.add_O(s,i)}this.H="",this.I=[],this.length_h=0,console.log("moveAllH2O : this.H = "+JSON.stringify(this.H)),console.log("moveAllH2O : this.O = "+JSON.stringify(this.O)),console.log("moveAllH2O : this.I = "+JSON.stringify(this.I)),console.log("moveAllH2O : this.CC = "+JSON.stringify(this.CC)+" T.CACHING_COUNTING = "+t.CACHING_COUNTING);for(var o=0;o<this.CC.length;o++)this.CC[o]<t.CACHING_COUNTING&&(this.CC[o]+=t.CACHING_COUNTING)},select_H:function(t){for(var s=0,i=0,o=this.H;i<o.length;)if(t.length==o[i]){for(var e=!0,n=i+1,h=0;h<t.length;h++,n++)if(t[h]!=o[n]){e=!1;break}if(e)return s;i+=t.length+1,console.log("select_H : bucket = "+o+", bucket_idx = "+i),s++}else i+=Number.parseInt(o[i])+1,console.log("select_H : bucket = "+o+", bucket_idx = "+i),s++;return-1},get_h:function(t){var s=0,i=0;if(!this.H)return-1;for(;s<this.H.length;){if(t==i)return this.H.substr(s+1,this.H[s]);if(!this.H[s])return-1;s+=parseInt(this.H[s])+1,i++}return-1},pop_h:function(t){var s=0,i=0;if(!this.H)return-1;for(;s<this.H.length;){if(t==i){var o=this.H.substr(0,s),e=this.H.substr(s+1,this.H[s]),n=this.H.substr(s+parseInt(this.H[s])+1,this.H.length);return this.H=o+n,this.length_h--,e}if(!this.H[s])return-1;s+=parseInt(this.H[s])+1,i++}return-1},pushPostfixToH:function(t){if(this.length_h==this.length){for(var s=0,i=0,o="";s<this.length_h;){var e=parseInt(this.H[i]);if(i++,this.C=this.C.replace(this.H[i],t[0]),1==e)";"==this.H[i]?o+=(e=t.length)+""+t:o+=(e+=t.length)+""+t+this.H[i];else{var n=this.H.substr(i,e);o+=(e+=t.length)+""+t+n,i+=n.length}i++,s++}console.log("pushPostfix : this.C = "+this.C+" postfix = "+t+" this.H = "+this.H+", new_H = "+o),this.H=o}},pushPostfix:function(t){console.log("pushPostfix : this.O = "+JSON.stringify(this.O));for(var s=0;s<this.O.length;s++)for(var i in this.O[s])console.log("pushPostfix : key = "+i),i&&1==i.length&&";"==i[0]?this.O[s][t]=this.O[s][i]:this.O[s][t+i]=this.O[s][i],delete this.O[s][i];console.log("pushPostfix : this.O = "+JSON.stringify(this.O)),this.C=t[0];var o=0;console.log("pushPostfix : this.CC = "+JSON.stringify(this.CC));for(s=0;s<this.CC.length;s++)o+=this.CC[s];this.CC.length=0,this.CC.push(o),console.log("pushPostfix : this.CC = "+JSON.stringify(this.CC))},removePrefix:function(t){if(this.length<this.BUCKET_START_POINT){var s=0;for(this.H=this.H.split("");s<this.H.length;){var i=parseInt(this.H[s]);if(i>=t.length){for(var o=!0,e=0;e<t.length;e++)this.H[s+1+e]!=t[e]&&(o=!1);if(o){this.H[s]=i-t.length;for(e=1;e<t.length;e++)delete this.H[s+e]}}s+=i+1}}},rank:function(t){}}},t.root=new this.node}return t.prototype={setRoot:function(t){var s=this;0===Object.keys(t).length&&t.constructor===Object?s.root=Object.assign(t,new s.node):s.root=t,console.log("setRoot : T.root = "+JSON.stringify(s.root)),console.log(s.root)},makeRoot:function(){var t=this,s=new t.node;return t.root=s,t.root},add:function(t,s){var i=t,o=-1;do{if(this.addInternal(this.root,i,s),-1==(o=i.indexOf(" ")))break;i=i.substr(o+1,t.length)}while(i)},addInternal:function(t,s,i){console.log("addInternal : function start : _word = "+s);var o=t,e=-1;if(s?e=o.add_C(s[0]):(s=";",-1==(e=o.select_c(";"))&&(o.C+=s)),o.CC[e]==this.CACHING_COUNTING&&(console.log("2) moveH2O"),o.moveH2O(e)),o.CC[e]>=this.CACHING_COUNTING||s.length>9){o.CC[e]<this.CACHING_COUNTING&&(o.CC[e]=this.CACHING_COUNTING+1),console.log("3) add O word = "+s+", _what = "+JSON.stringify(i));var n=o.add_O(s,i);if(1!=n){var h=o.O[e][n];return console.log("result : "+n+", current : "+JSON.stringify(o)+", _obj : "+JSON.stringify(h)),this.addInternal(h,s.substr(n.length,s.length),i)}o.length++}else console.log("4) add Hash Bucket"),o.add_H(s,i),o.length++;console.log("----------------ROOT--------------"),console.log(this.root)},search:function(t){var s=this.root,i=[],o=t,e=(o.length,null),n=0,h=null,l=0;for(s.select_c(o[0]);-1!=(h=s.select_c(o[0]));){if(console.log("search : query_instance : "+o),console.log(s),e=null,n=0,!(s.CC[h]>=this.CACHING_COUNTING)){var r=s.select_H(o);r>=0?i.push(s.I[r]):console.log("There is no result.");break}var g=s.O[h];for(var c in console.log(g),n=1,g){var f=c.length>o.length?o.length:c.length;if(1==f){e=g[c];break}var a=1;for(console.log("search : co = "+JSON.stringify(g)+", min_length = "+f);a<f&&o[a]==c[a];a++)n<a+1&&(e=g[c],n=a+1),console.log("search : max_co = "+JSON.stringify(e)+", comp_idx = "+a)}if(console.log("max_co_length = "+n+", comp_idx = "+a),!e)break;s=e,l++,n==f&&(0==(o=o.substr(f,o.length)).length&&(o=";"),0,console.log("search : max_co_length == comp_idx"),console.log(s))}if(console.log("full search start!"),console.log(s),i.length>0||0==l)return i;var u=[],C=0;for(u.push(s);u.length!=C&&(s=u[C]);){if(s.I&&s.I.some(function(t){i.push(t)}),s.C)for(h=0;h<s.C.length;h++)if(s.CC[h]>=this.CACHING_COUNTING)for(var O in s.O[h])u.push(s.O[h][O]);C++}return console.log("RESULT"),console.log(t),console.log(i),i}},t}()}]);