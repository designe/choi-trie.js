!function(t){var s={};function o(i){if(s[i])return s[i].exports;var e=s[i]={i:i,l:!1,exports:{}};return t[i].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=t,o.c=s,o.d=function(t,s,i){o.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:i})},o.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},o.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(s,"a",s),s},o.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},o.p="",o(o.s=0)}([function(t,s,o){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.ChoiTrie=function(){function t(){var t=this;t.CACHING_COUNTING=2,t.node=function(s,o){var i="",e="",n=[],h=[];return console.log(o),o&&(0==s.length?(i+=";",e+="1;"):(i+=s[0],e+=s.length+s),h.push(1),o.constructor===Array?n.push(o):(n.push([]),n[0].push(o)),console.log("_what = "+o),console.log("_what = "+JSON.stringify(o))),{C:i,H:e,O:[],I:n,CC:h,length:n.length,length_h:0,select:function(t){return this.C?-1*this.select_c(t):this.H?this.select_h(t):0},select_c:function(t){for(var s=0;s<this.C.length;s++)if(t[0]===this.C[s])return s;return-1},add_C:function(t){var s=this.select_c(t);return-1!=s?(this.cachingIt(s),s):(this.C+=t,this.CC.push(1),this.C.length-1)},add_H:function(t,s){var o=this.select_H(t);if(console.log("add_H : h_idx = "+o+" word = "+t+", what "+JSON.stringify(s)),-1==o){var i=t.length;this.H+=i+t,o=this.length_h,this.length_h++}this.I[o]||(this.I[o]=[]),console.log("add_H : h_idx = "+o+", this.H = "+JSON.stringify(this.H)+",  this.I = "+JSON.stringify(this.I)),this.I[o].push(s)},add_O:function(s,o){var i=this.select_c(s[0]);console.log("add_O : c_idx = "+i+", this.O = "+JSON.stringify(this.O)),this.O[i]||(this.O[i]={});var e=this.O[i],n=0,h=null;for(var r in e)for(var l=s.length>r.length?r.length:s.length,c=0;c<l&&(console.log("add_O : _word = "+s+" key = "+r),r[c]==s[c]);c++)(null==h||n<=c)&&(n=c,h=r);if(console.log("add_O : _word = "+s+", _what = "+JSON.stringify(o)+" maximum_idx = "+n+" maximum_key = "+h),h){if(h.length-1==n)return h;var g=h.substr(0,n+1),f=h.substr(n+1,h.length-n);return console.log("add_O : prefix = "+g+", postfix = "+f),e[h].moveAllH2O(),e[h].pushPostfix(f),e[g]=e[h],delete e[h],console.log("add_O : co[prefix] = "+JSON.stringify(e[g])),g}return console.log("add_O : PUSHED what = "+o),e[s]=new t.node("",o),console.log("add_O : co[_word] = "+JSON.stringify(e[s])),!0},cachingIt:function(t){this.CC[t]++},moveH2O:function(s){for(var o=0,i=0,e=this.C[s],n=this.I[s],h=0,r=0;r<this.CC.length;r++)this.CC[r]>t.CACHING_COUNTING||(n=this.I[h++],h==s&&(e=this.C[r]));for(console.log("moveH2O : this = "+JSON.stringify(this)+" this.CC = "+JSON.stringify(this.CC)),console.log("moveH2O : _idx = "+s+", _char = "+e+", _what = "+JSON.stringify(n)+" this.H = "+this.H+", this.O = "+JSON.stringify(this.O));i<this.H.length;){var l=Number.parseInt(this.H[i]);if(this.H[i+1]==e){var c=this.pop_h(o);console.log("moveH2O : word = "+c+" in while"),this.I.splice(o,1),this.add_O(c,n),this.length_h--;break}i+=l+1,console.log("moveH2O : h_index = "+i+", "+this.H.substr(0,i)+" in while"),o++}console.log("moveH2O : _idx = "+s+" this.H = "+this.H+", this.O = "+JSON.stringify(this.O)),this.CC[s]<=t.CACHING_COUNTING&&(this.CC[s]+=t.CACHING_COUNTING)},moveAllH2O:function(){for(console.log("moveAllH2O : this.H = "+JSON.stringify(this.H)),console.log("moveAllH2O : this.O = "+JSON.stringify(this.O)),console.log("moveAllH2O : this.I = "+JSON.stringify(this.I));0<this.H.length;)if(this.H[1]){var s=this.pop_h(0),o=this.I[0];this.I.splice(0,1),this.add_O(s,o)}console.log("moveAllH2O : this.H = "+JSON.stringify(this.H)),console.log("moveAllH2O : this.O = "+JSON.stringify(this.O)),console.log("moveAllH2O : this.I = "+JSON.stringify(this.I)),console.log("moveAllH2O : this.CC = "+JSON.stringify(this.CC)+" T.CACHING_COUNTING = "+t.CACHING_COUNTING);for(var i=0;i<this.CC.length;i++)this.CC[i]<t.CACHING_COUNTING&&(this.CC[i]+=t.CACHING_COUNTING)},select_H:function(t){for(var s=0,o=0,i=this.H;o<i.length;)if(t.length==i[o]){for(var e=!0,n=o+1,h=0;h<t.length;h++,n++)if(t[h]!=i[n]){e=!1;break}if(e)return s;o+=t.length+1,console.log("select_H : bucket = "+i+", bucket_idx = "+o),s++}else o+=Number.parseInt(i[o])+1,console.log("select_H : bucket = "+i+", bucket_idx = "+o),s++;return-1},get_h:function(t){var s=0,o=0;if(!this.H)return-1;for(;s<this.H.length;){if(t==o)return this.H.substr(s+1,this.H[s]);if(!this.H[s])return-1;s+=parseInt(this.H[s])+1,o++}return-1},pop_h:function(t){var s=0,o=0;if(!this.H)return-1;for(;s<this.H.length;){if(t==o){var i=this.H.substr(0,s),e=this.H.substr(s+1,this.H[s]),n=this.H.substr(s+parseInt(this.H[s])+1,this.H.length);return this.H=i+n,e}if(!this.H[s])return-1;s+=parseInt(this.H[s])+1,o++}return-1},pushPostfix:function(t){this.C=t[0];var s=0;console.log("pushPostfix : this.CC = "+JSON.stringify(this.CC));for(var o=0;o<this.CC.length;o++)s+=this.CC[o];this.CC.length=0,this.CC.push(s),console.log("pushPostfix : this.CC = "+JSON.stringify(this.CC)),console.log("pushPostfix : this.O = "+JSON.stringify(this.O));for(o=0;o<this.O.length;o++)for(var i in this.O[o])console.log("pushPostfix : key = "+i),i&&1==i.length&&";"==i[0]?this.O[o][t]=this.O[o][i]:this.O[o][t+i]=this.O[o][i],delete this.O[o][i];console.log("pushPostfix : this.O = "+JSON.stringify(this.O))},removePrefix:function(t){if(this.length<this.BUCKET_START_POINT){var s=0;for(this.H=this.H.split("");s<this.H.length;){var o=parseInt(this.H[s]);if(o>=t.length){for(var i=!0,e=0;e<t.length;e++)this.H[s+1+e]!=t[e]&&(i=!1);if(i){this.H[s]=o-t.length;for(e=1;e<t.length;e++)delete this.H[s+e]}}s+=o+1}}},rank:function(t){}}},t.root=new this.node}return t.prototype={setRoot:function(t){var s=this;0===Object.keys(t).length&&t.constructor===Object?s.root=Object.assign(t,new s.node):s.root=t,console.log("setRoot : T.root = "+JSON.stringify(s.root)),console.log(s.root)},makeRoot:function(){var t=this,s=new t.node;return t.root=s,t.root},add:function(t,s){var o=this,i=t.split(/ /g);o.addInternal(o.root,t,s),i.some(function(t){o.addInternal(o.root,t,s)})},addInternal:function(t,s,o){console.log("addInternal : function start : _word = "+s);var i=t,e=-1;if(s?e=i.add_C(s[0]):(s=";",-1==(e=i.select_c(";"))&&(i.C+=s)),i.CC[e]==this.CACHING_COUNTING&&(console.log("2) moveH2O"),i.moveH2O(e)),i.CC[e]>=this.CACHING_COUNTING||s.length>9){i.CC[e]<this.CACHING_COUNTING&&(i.CC[e]=this.CACHING_COUNTING+1),console.log("3) add O word = "+s+", _what = "+JSON.stringify(o));var n=i.add_O(s,o);if(1!=n){var h=i.O[e][n];return console.log("result : "+n+", current : "+JSON.stringify(i)+", _obj : "+JSON.stringify(h)),this.addInternal(h,s.substr(n.length,s.length),o)}i.length++}else console.log("4) add Hash Bucket"),i.add_H(s,o),i.length++;console.log("----------------ROOT--------------"),console.log(this.root)},search:function(t){var s=this.root,o=[],i=t,e=(i.length,null),n=0,h=null,r=0;for(s.select_c(i[0]);-1!=(h=s.select_c(i[0]));){if(console.log("search : query_instance : "+i),console.log(s),e=null,n=0,!(s.CC[h]>=this.CACHING_COUNTING)){var l=s.select_H(i);if(l>=0)for(var c=0;c<s.I[l].length;c++)o.push(s.I[l][c]);else console.log("There is no result.");break}var g=s.O[h];for(var f in console.log(g),n=1,g){var a=f.length>i.length?i.length:f.length;if(1==a){e=g[f];break}var u=1;for(console.log("search : co = "+JSON.stringify(g)+", min_length = "+a);u<a&&i[u]==f[u];u++)n<u+1&&(e=g[f],n=u+1),console.log("search : max_co = "+JSON.stringify(e)+", comp_idx = "+u)}if(console.log("max_co_length = "+n+", comp_idx = "+u),!e)break;s=e,r++,n==a&&(0==(i=i.substr(a,i.length)).length&&(i=";"),0,console.log("search : max_co_length == comp_idx"),console.log(s))}if(console.log("full search start!"),console.log(s),o.length>0||0==r)return o;var C=[],O=0;for(C.push(s);C.length!=O&&(s=C[O]);){if(s.I&&s.I.some(function(t){o.push(t)}),s.C)for(h=0;h<s.C.length;h++)if(s.CC[h]>=this.CACHING_COUNTING)for(var _ in s.O[h])C.push(s.O[h][_]);O++}return console.log("RESULT"),console.log(t),console.log(o),o}},t}()}]);